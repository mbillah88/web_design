{% load i18n %}
{% load multiply %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0 auto;
            padding: 0;
            width: 210mm;
            height: 297mm;
            box-sizing: border-box;
        }
        .header, .footer {
            background-color: #f2f2f2;
            padding: 10px;
            text-align: center;
            position: relative;
            width: 100%;
        }
        .header {
            top: 0;
        }
        .footer {
            height: 15px;
            font-size: 11px;
            bottom: 0;
        }
        .container {
            padding: 60px 20px 20px 20px; /* Adjust padding to account for fixed header/footer */
            margin: 0 auto;
            width: 100%;
            max-width: 180mm; /* Adjust width to fit A4 page with margins */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            font-size: .8em;
        }
        th {
            background-color: #f2f2f2;
        }
        .summary {
            margin-top: 20px;
        }
        @media print {
        body {
            width: 210mm;
            height: 297mm;
            margin: 0;
        }
        .header, .footer {
            position: fixed;
        }
        .container {
            padding-top: 70px; /* Adjust padding to account for fixed header */
            padding-bottom: 40px; /* Adjust padding to account for fixed footer */
        }
        table, th, td {
            border: 1px solid #000;
        }
    }
    </style>
</head>
<body>
    <div class="header" style="display: flex; gap: 1rem; justify-content: space-between; align-items: center;">
        <div style=" display: flex ; gap: 1rem; align-items: center; flex-direction: row; padding-left: 1rem;">
            <img style="width: 180px; height:70px;"  class="rounded-img" src="{% static 'business_apps/img/sst_banner.png' %}" alt="SST Logo">
         
        </div>
        <div style=" display: flex ; font-size: 11px; align-items: flex-end; flex-direction: column; padding-right: 1rem; font-family: 'Courier New', Courier, monospace;">
            <span>Jahaj Company mor, Rangpur</span>
            <span>mobile :01722995325, 01303106345 </span>
            <span>email : shahriarshanto3616@gmail.com</span>
            <span>www : sstechnology.com</span>
        </div>
        
    </div>
    <br><br><br>
    <div class="container">        
        <div class="main-content">
            <div style="display: flex; gap: 1rem; font-size: .8em;">
                <div style="display: grid; width: 180px;">
                    <div style="flex: 50%;">
                        <h5 style="color: wheat; background-color: #003cff; padding: .5rem; border: 1px solid wheat; margin: -20px 20px 10px 20px; text-align: center;border-radius: 1.8rem;">Purchase Todays</h5>
                    </div>  
                    <div style="flex: 50%;">
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem;font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Order :</span> </div><div style="flex: 50%;"><span>{{total_sales_orders}}</span></div></div>
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem;font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Item :</span> </div><div style="flex: 50%;"><span>{{total_sales_items}}</span></div> </div>
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem;font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Amount :</span> </div><div style="flex: 50%;"><span>{{total_sales_amount}}</span></div> </div>
                    </div> 
                </div>
                <div style="display: grid; width: 180px;">      
                    <div style="flex: 50%;">
                        <h5 style="color: wheat; background-color: #6f00ff; padding: .5rem; border: 1px solid wheat; margin: -20px 20px 10px 20px; text-align: center;border-radius: 1.8rem;">Purchase Todays</h5>
                    </div>              
                    <div style="flex: 50%;">
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Order :</span> </div><div style="flex: 50%;"><span>{{total_purchase_orders}}</span></div></div>
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Item :</span> </div><div style="flex: 50%;"><span>{{total_purchase_items}}</span></div> </div>
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Amount :</span> </div><div style="flex: 50%;"><span>{{total_purchase_amount}}</span></div> </div>
                    </div>
                </div>
                <div style="display: grid; width: 180px;">               
                    <div style="flex: 50%;">
                        <h5 style="color: wheat; background-color: #8c4e06; padding: .5rem; border: 1px solid wheat; margin: -20px 20px 10px 20px; text-align: center;border-radius: 1.8rem;">Service Todays</h5>
                    </div>             
                    <div style="flex: 50%;">      
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Recieved :</span> </div><div style="flex: 50%;"><span>{{total_purchase_orders}}</span></div></div>
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Delivery :</span> </div><div style="flex: 50%;"><span>{{total_purchase_items}}</span></div> </div>
                        <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Pending :</span> </div><div style="flex: 50%;"><span>{{total_purchase_amount}}</span></div> </div>
                    </div>
                </div>
                <div style="display: grid; width: 180px;">               
                    <div style="flex: 50%;">
                        <h5 style="color: wheat; background-color: #3a5b00; padding: .5rem; border: 1px solid wheat; margin: -20px 20px 10px 20px; text-align: center;border-radius: 1.8rem;">Project Todays</h5>
                    </div>          
                    <div style="flex: 50%;">              
                        <div style="flex: 50%;">
                            <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Running :</span> </div><div style="flex: 50%;"><span>{{total_purchase_orders}}</span></div></div>
                            <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Complete :</span> </div><div style="flex: 50%;"><span>{{total_purchase_items}}</span></div> </div>
                            <div style="display: flex ; align-items: center; justify-content: center; gap: 1rem; font-weight: 700;"><div style="flex: 50%; text-align: right;"><span>Pending :</span> </div><div style="flex: 50%;"><span>{{total_purchase_amount}}</span></div> </div>                
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <br><hr><br>
                <div class="main-content" style="display: flex; gap: 1rem; justify-content: space-around;">
                    <div class="content">     
                        <div class="form-header" style="display: flex;">     
                            <span style="font-size: .8em; font-weight: bolder;">Todays Sales</span>           
                        </div> 
                        <hr>
                        <div class="content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Product ID</th>
                                        <th>Product Name</th>
                                        <th>Total Qty </th>
                                        <th>Total Amt</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item in sales_summary_today %}
                                        <tr>
                                            <td>{{ item.item_id__id }}</td>
                                            <td>{{ item.item_id__item_name }}</td>
                                            <td>{{ item.total_sold_quantity }}</td>
                                            <td>{{ item.total_sold_amount }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <hr>
                    <div class="content">     
                        <div class="form-header" style="display: flex;">     
                            <span style="font-size: .8em; font-weight: bolder;">Todays Purchase</span>           
                        </div>
                        <hr>
                        <div class="content">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Product ID</th>
                                        <th>Product Name</th>
                                        <th>Total Qty </th>
                                        <th>Total Amt</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item in purchase_summary_today %}
                                        <tr>
                                            <td>{{ item.item_id__id }}</td>
                                            <td>{{ item.item_id__item_name }}</td>
                                            <td>{{ item.total_purchased_quantity }}</td>
                                            <td>{{ item.total_purchased_amount }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
        
<hr><br>
        <div class="main-content" style="display: flex; gap: 1rem; justify-content: space-around;">
            <div class="content">     
                <div class="form-header" style="display: flex;">     
                    <span style="font-size: .8em; font-weight: bolder;">Sales Summary</span>           
                </div> 
                <hr>
                <div class="content">
                    <table>
                        <thead>
                            <tr>
                                <th>Product ID</th>
                                <th>Product Name</th>
                                <th>Total Qty </th>
                                <th>Total Amt</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in sales_summary %}
                                <tr>
                                    <td>{{ item.item_id__id }}</td>
                                    <td>{{ item.item_id__item_name }}</td>
                                    <td>{{ item.total_sold_quantity }}</td>
                                    <td>{{ item.total_sold_amount }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <hr>
            <div class="content">     
                <div class="form-header" style="display: flex;">     
                    <span style="font-size: .8em; font-weight: bolder;">Purchase Summary</span>           
                </div>
                <hr>
                <div class="content">
                    <table>
                        <thead>
                            <tr>
                                <th>Product ID</th>
                                <th>Product Name</th>
                                <th>Total Qty </th>
                                <th>Total Amt</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in purchase_summary %}
                                <tr>
                                    <td>{{ item.item_id__id }}</td>
                                    <td>{{ item.item_id__item_name }}</td>
                                    <td>{{ item.total_purchased_quantity }}</td>
                                    <td>{{ item.total_purchased_amount }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <hr><br>
        <div class="main-content">
        <div class="content">       
            <nav class="navbar navbar-expand">
                <div class="container-fluid">
                <div class="navbar-nav me-auto mb-2 mb-lg-0" style="align-items: center;">
                    <span style="font-size: .8em; font-weight: bolder; margin-right: 2rem;">Product Summary</span>            
                </div>
                </div>
            </nav>
            <hr style="margin: .0rem 0rem 1rem 0rem;
            color: inherit;
            background-color: currentColor;
            border: 0;
            opacity: .75;">
            <div class="content" style="box-shadow: inset;">
                <table id="productTable" style="font-size: .8rem;">            
                    <tr>
                        <th style="text-align: center;">SL</th>
                        <th style="text-align: center;">Product ID</th>
                        <th style="text-align: center;">Product Name</th>
                        <th style="text-align: center;">Purchase Qty </th>
                        <th style="text-align: center;">Purchase Amt</th>
                        <th style="text-align: center;">Sales Qty </th>
                        <th style="text-align: center;">Sales Amt</th>
                        <th style="text-align: center;">Available Qty</th>
                    </tr>        
                    {% for item in inventory_summary %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td style="text-align: center; font-weight: 700;">{{ item.item_id }}</td>
                        <td style="font-weight: 700;">{{ item.item_name }}</td>
                        <td style="text-align: center;">{{ item.total_purchased_quantity }}</td>
                        <td style="text-align: right;">{{ item.total_purchased_amount }}</td>
                        <td style="text-align: center;">{{ item.total_sold_quantity }}</td>
                        <td>{{ item.total_sold_amount }}</td>
                        <td style="text-align: center; font-weight: 700;">{{ item.remaining_quantity }}</td>
                    </tr>
                    {% endfor %}
                </table>
        
            </div> 
        
            </div>
        </div>
    </div>
    <div class="footer">
        <span>Dhumketu Web @2025 - Thank you for your business!</span>
    </div>
</body>
</html>
